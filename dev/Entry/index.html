<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Entry · AstrodynamicalModels</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">AstrodynamicalModels</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><span class="tocitem">Overview</span><ul><li><a class="tocitem" href="../">Getting Started</a></li><li><a class="tocitem" href="../docstrings/">Docstrings</a></li></ul></li><li><span class="tocitem">Models</span><ul><li><a class="tocitem" href="../R2BP/">R2BP</a></li><li><a class="tocitem" href="../CR3BP/">CR3BP</a></li><li><a class="tocitem" href="../NBP/">NBP</a></li><li class="is-active"><a class="tocitem" href>Entry</a><ul class="internal"><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#Examples"><span>Examples</span></a></li></ul></li><li><a class="tocitem" href="../Attitude/">Attitude</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Models</a></li><li class="is-active"><a href>Entry</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Entry</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/cadojo/AstrodynamicalModels.jl/blob/main/docs/src/Entry.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Planar-Entry-Dynamics"><a class="docs-heading-anchor" href="#Planar-Entry-Dynamics">Planar Entry Dynamics</a><a id="Planar-Entry-Dynamics-1"></a><a class="docs-heading-anchor-permalink" href="#Planar-Entry-Dynamics" title="Permalink"></a></h1><p><em>Also known as canonical entry dynamics!</em></p><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><p>The Planar Entry model assumes a spacecraft moving in an exponential atmosphere about a spherical planet. Acceleration due to gravity is ignored. The equations of motion are shown below.</p><p class="math-container">\[\begin{align}
  \dot{\gamma} &amp;= \frac{1}{v} \left( L_m - (1 - \frac{v^2}{v_c^2}) g \cos{\gamma} \right) \\
  \dot{v} &amp;= -D_m - g \sin{\gamma} \\
  \dot{r} &amp;= v \sin{\gamma} \\
  \dot{\theta} &amp;= \frac{v}{r} \cos{\gamma} \\
\end{align}\]</p><h2 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h2><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; model = PlanarEntry()</code><code class="nohighlight hljs ansi" style="display:block;">Model PlanarEntry with 4 equations
States (4):
  γ(t): flight path angle in degrees
  v(t): airspeed in meters per second
  r(t): polar distance relative to planet center in meters
  θ(t): polar angle relative to planet horizontal in degrees
Parameters (7):
  R: spherical planet radius
  P: atmospheric density at sea level in kilograms per meter cubed
  H: scale factor for exponential atmosphere in meters
  m: entry vehicle mass in kilograms
⋮</code></pre><p>Let&#39;s compute the Jacobian for these dynamics.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; J = calculate_jacobian(PlanarEntry())</code><code class="nohighlight hljs ansi" style="display:block;">4×4 Matrix{Num}:
 (μ*((R / r(t))^2)*(1 - ((v(t) / sqrt(μ / r(t)))^2))*sin(γ(t))) / ((R^2)*v(t))  …  0
                                         (-μ*((R / r(t))^2)*cos(γ(t))) / (R^2)     0
                                                                v(t)*cos(γ(t))     0
                                                      (-v(t)*sin(γ(t))) / r(t)     0</code></pre><p>Finally, let&#39;s construct a Julia function which implements these dynamics!</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; f = PlanarEntryFunction()</code><code class="nohighlight hljs ansi" style="display:block;">(::ODEFunction{true, SciMLBase.AutoSpecialize, ModelingToolkit.var&quot;#f#520&quot;{RuntimeGeneratedFunctions.RuntimeGeneratedFunction{(:ˍ₋arg1, :ˍ₋arg2, :t), ModelingToolkit.var&quot;#_RGF_ModTag&quot;, ModelingToolkit.var&quot;#_RGF_ModTag&quot;, (0xfc2e9d6a, 0x97448655, 0xee7fb77b, 0x99492ddc, 0xaa13df15), Expr}, RuntimeGeneratedFunctions.RuntimeGeneratedFunction{(:ˍ₋out, :ˍ₋arg1, :ˍ₋arg2, :t), ModelingToolkit.var&quot;#_RGF_ModTag&quot;, ModelingToolkit.var&quot;#_RGF_ModTag&quot;, (0xe226e257, 0xf7d7e7cf, 0xbcf0bd06, 0x302e0668, 0x9b8b15f8), Expr}}, LinearAlgebra.UniformScaling{Bool}, Nothing, Nothing, ModelingToolkit.var&quot;#_jac#524&quot;{RuntimeGeneratedFunctions.RuntimeGeneratedFunction{(:ˍ₋arg1, :ˍ₋arg2, :t), ModelingToolkit.var&quot;#_RGF_ModTag&quot;, ModelingToolkit.var&quot;#_RGF_ModTag&quot;, (0xc508fd71, 0x7e2ad8bd, 0x0abdd834, 0x0313802e, 0x9a9ebf93), Expr}, RuntimeGeneratedFunctions.RuntimeGeneratedFunction{(:ˍ₋out, :ˍ₋arg1, :ˍ₋arg2, :t), ModelingToolkit.var&quot;#_RGF_ModTag&quot;, ModelingToolkit.var&quot;#_RGF_ModTag&quot;, (0x9c0ff386, 0x1681ccbb, 0x8c3c08e6, 0x0c216419, 0x2bfc89e6), Expr}}, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Vector{Symbol}, Symbol, Vector{Symbol}, ModelingToolkit.var&quot;#567#generated_observed#528&quot;{Bool, ODESystem, Dict{Any, Any}}, Nothing, ODESystem}) (generic function with 1 method)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; let u = randn(4), p = randn(7), t = 0
           f(u, p, t)
       end</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: DomainError with -2.5200514384161266:
sqrt will only return a complex result if called with a complex argument. Try sqrt(Complex(x)).
DomainError detected in the user `f` function. This occurs when the domain of a function is violated.
For example, `log(-1.0)` is undefined because `log` of a real number is defined to only output real
numbers, but `log` of a negative number is complex valued and therefore Julia throws a DomainError
by default. Cases to be aware of include:

* `log(x)`, `sqrt(x)`, `cbrt(x)`, etc. where `x&lt;0`
* `x^y` for `x&lt;0` floating point `y` (example: `(-1.0)^(1/2) == im`)

Within the context of SciML, this error can occur within the solver process even if the domain constraint
would not be violated in the solution due to adaptivity. For example, an ODE solver or optimization
routine may check a step at `new_u` which violates the domain constraint, and if violated reject the
step and use a smaller `dt`. However, the throwing of this error will have halted the solving process.

Thus the recommended fix is to replace this function with the equivalent ones from NaNMath.jl
(https://github.com/JuliaMath/NaNMath.jl) which returns a NaN instead of an error. The solver will then
effectively use the NaN within the error control routines to reject the out of bounds step. Additionally,
one could perform a domain transformation on the variables so that such an issue does not occur in the
definition of `f`.

For more information, check out the following FAQ page:
https://docs.sciml.ai/Optimization/stable/API/FAQ/#The-Solver-Seems-to-Violate-Constraints-During-the-Optimization,-Causing-DomainErrors,-What-Can-I-Do-About-That?</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../NBP/">« NBP</a><a class="docs-footer-nextpage" href="../Attitude/">Attitude »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Thursday 18 May 2023 17:27">Thursday 18 May 2023</span>. Using Julia version 1.9.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
